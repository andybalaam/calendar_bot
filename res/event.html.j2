<html>
<title>Calendar Reminders</title>
<meta charset="utf-8">
<style>
    {% include "base.css" %}
</style>

<script>
{% include "base.js" %}
</script>

<body>
    {% include "sidebar.html" %}

    <div id="content">
        <div id="event-info">
            <h1>{{ event.summary }}</h1>

            <p><b>Next date:</b> <span class="datetime">{{ event.next_dates[0] }}</span></p>

            {% if event.location %}<p><b>Location:</b> {{ event.location }}</p>{% endif %}

            {% if event.description %}
            <p><b>Description:</b></p>
            <blockquote>{{ event.description }}</blockquote>
            {% endif %}

        </div>

        <hr/>


        <h3>Reminders</h3>

        <div id="reminders">

        <p><a href="/event/{{ calendar_id }}/{{ event.event_id }}/new_reminder">Add reminder</a></p>

        {% if reminders %}
            <ul>
            {% for reminder in reminders %}
                <li>{{ reminder.minutes_before }} minutes before in <code>{{ reminder.room_id }}. <a href="/event/{{ calendar_id }}/{{ event.event_id }}/reminder/{{ reminder.reminder_id }}">Edit</a></code>
            {% endfor %}
            </ul>
        {% else %}
            No reminders.
        {% endif %}

        </div>


{#
        <div id="reminder-info">
            <h3>Reminder</h3>
            {% if form_state == "saved" %}
            Saved
            {% elif form_state == "deleted" %}
            Deleted
            {% endif %}
            <form action="/event/{{ calendar_id }}/{{ event.event_id }}/reminder" method="post">
                {% if reminder %}<input type="hidden" value="{{ reminder.reminder_id }}" />{% endif %}
                <p>Minutes Before: <input type="number" name="minutes_before" value={{ reminder.minutes_before | default(value=30) }} /></p>
                <p>Room: <input type="text" name="room_id" placeholder="#room:example.com" {% if reminder %} value="{{ reminder.room_id }}" {% endif %} /></p>

                <p>Template: <label for="default-template">Default Template</label><input type="checkbox" name="use_default" onclick="on_default_template_clicked()" id="default-template" {% if not reminder or not reminder.template %} checked {% endif %} /></p>
                <textarea name="template" id="reminder-template">{{ reminder.template | default(value=default_template) | safe }}</textarea>
                {% if reminder %}
                <p><input type="submit" value="Update" /> <input type="submit" value="Delete" formaction="/event/{{ calendar_id }}/{{ event.event_id }}/delete_reminder" /></p>
                {% else %}
                <p><input type="submit" value="Add"/></p>
                {% endif %}
            </form>
        </div> #}

    </div>
</body>

</html>
